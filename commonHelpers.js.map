{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["'use strict';\n\nimport axios from 'axios';\n\nexport class ImagesAPI {\n  constructor(userSearchRequest) {\n    this.BASE_URL = 'https://pixabay.com';\n    this.ENDPOINT = '/api/';\n    this.KEY = 'key=42471766-4e6ef41ee0191e88bcacb27c7';\n    this.parameters = {\n      q: `&q=${userSearchRequest}`,\n      image_type: '&image_type=photo',\n      orientation: '&orientation=horizontal',\n      safesearch: '&safesearch=true',\n    };\n\n    this.PARAMS = '';\n\n    for (const parameter of Object.values(this.parameters)) {\n      this.PARAMS += parameter;\n    }\n\n    const url = `${this.BASE_URL}${this.ENDPOINT}?${this.KEY}${this.PARAMS}`;\n    this.URL = url;\n  }\n\n  getImages() {\n    return fetch(this.URL).then(response => response.json());\n  }\n}\n","'use strict';\n\nconst gallery = document.querySelector('.gallery');\n\nexport function templateImage(image) {\n  return `<li class=\"gallery-card\">\n  <div class=\"gallery-card-wrapper\">\n    <div class=\"thumb\">\n      <a href=\"${image.largeImageURL}\" class=\"gallery-link-image\"><img class=\"gallery-img\" src=\"${image.webformatURL}\" data-original-size=\"${image.largeImageURL}\" alt=\"${image.tags}\" /></a>\n    </div>\n    <ul class=\"statistic-list\">\n      <li class=\"statistic-item\">\n        <p class=\"statistic-name\">Likes</p>\n        <p class=\"statistic-numbers\">${image.likes}</p>\n      </li>\n      <li class=\"statistic-item\">\n        <p class=\"statistic-name\">Views</p>\n        <p class=\"statistic-numbers\">${image.views}</p>\n      </li>\n      <li class=\"statistic-item\">\n        <p class=\"statistic-name\">Comments</p>\n        <p class=\"statistic-numbers\">${image.comments}</p>\n      </li>\n      <li class=\"statistic-item\">\n        <p class=\"statistic-name\">Downloads</p>\n        <p class=\"statistic-numbers\">${image.downloads}</p>\n      </li>\n    </ul>\n  </div>\n</li>`;\n}\n\nexport function createMarkup(images) {\n  const elementMarkup = images.map(image => templateImage(image));\n  const markup = elementMarkup.join('');\n  markupRender(markup);\n}\n\nexport function markupRender(markup) {\n  gallery.insertAdjacentHTML('afterbegin', markup);\n}\n","'use strict';\n\nimport { ImagesAPI } from './js/pixabay-api';\nimport * as renderFunctions from './js/render-functions';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport axios from 'axios';\n\nconst izitoastMessageOptions = {\n  message: 'The search field must be filled!',\n  messageColor: 'white',\n  backgroundColor: 'red',\n  close: false,\n  position: 'topRight',\n  progressBar: false,\n  animateInside: false,\n  timeout: 3000,\n};\n\nexport const refs = {\n  form: document.querySelector('.form'),\n  inputSearch: document.querySelector('[type=\"search\"]'),\n  searchButton: document.querySelector('[type=\"submit\"]'),\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  loadButton: document.querySelector('.btn-load-more'),\n};\n\nrefs.form.addEventListener('submit', fetchOnPixabayAPI);\n\nfunction fetchOnPixabayAPI(evt) {\n  evt.preventDefault();\n  refs.gallery.innerHTML = '';\n  refs.loader.classList.remove('hidden');\n\n  const userSearchWords = refs.inputSearch.value.trim();\n  const userSearchParams = userSearchWords.split(' ').join('+');\n\n  if (userSearchWords !== '') {\n    const imagesApi = new ImagesAPI(userSearchParams);\n\n    refs.loader.classList.remove('hidden');\n\n    imagesApi\n      .getImages()\n      .then(data => {\n        refs.form.reset();\n        checkTheSearchResults(data.hits)\n      })\n      .catch(error => {\n        console.log(error);\n        iziToast.show({\n          ...izitoastMessageOptions,\n          message: 'Request error',\n        });\n      })\n      .finally(() => {\n        refs.loader.classList.add('hidden');\n      });\n  } else {\n    refs.loader.classList.add('hidden');\n    iziToast.show(izitoastMessageOptions);\n  }\n}\n\nfunction checkTheSearchResults(searchResults) {\n  if (searchResults.length !== 0) {\n    renderFunctions.createMarkup(searchResults);\n    createModalWindows();\n  } else {\n    iziToast.show({\n      ...izitoastMessageOptions,\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n  }\n}\n\nfunction createModalWindows() {\n  const galleryItem = new SimpleLightbox('.gallery a', {\n    captionSelector: 'img',\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n\n  galleryItem.on('show.simplelightbox');\n  galleryItem.refresh();\n}\n"],"names":["ImagesAPI","userSearchRequest","parameter","url","response","gallery","templateImage","image","createMarkup","images","markup","markupRender","izitoastMessageOptions","refs","fetchOnPixabayAPI","evt","userSearchWords","userSearchParams","imagesApi","data","checkTheSearchResults","error","iziToast","searchResults","renderFunctions.createMarkup","createModalWindows","galleryItem","SimpleLightbox"],"mappings":"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"}